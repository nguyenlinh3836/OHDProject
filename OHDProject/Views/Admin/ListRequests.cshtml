@model IEnumerable<OHDProject.Models.ViewModel1>
@{ Layout = "_AdminLayout"; }
<environment>
    <link href="~/css/sb-admin-2.css" rel="stylesheet">
</environment>
<!-- Page Heading -->
<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">List requests</h1>
</div>
<div class="content" style="width: fit-content;margin-left: -15px;margin-top: -15px">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <div class="card strpied-tabled-with-hover">
                    <div class="card-body table-responsive">
                        <table class="table table-hover table-striped table-fixed" id="table1" cellpadding="0" style="width:1500px;">
                            <thead>
                                <th>Request ID</th>
                                <th>Subject</th>
                                <th>Create Time</th>
                                <th>Requestor</th>
                                <th>Facility Name</th>
                                <th>Status</th>
                                <th>Details</th>
                            </thead>
                            <tbody>
                                @foreach (var item in Model) 
                                {
                                    <tr>
                                        <td>@item._requests.RequestId</td>
                                        <td>@item._requests.Subject</td>
                                        <td>@item._requests.CreateTime</td>
                                        <td>@item._accounts.Email</td>
                                        <td>@item._facilities.FacilityName</td>
                                        <td>@item._requests.Status</td>
                                        <td id="details">
                                            <div class="card-body table-responsive" style="position: relative;top:-28px; left:-24px;">
                                                <a type="button" href="" class="btn btn-primary btn-block" data-toggle="modal" data-target="#myModal" style="width:80px; padding-left: 5px 5px; ">Details</a>

                                                <!-- Modal -->
                                                <div class="container">
                                                    <!-- The Modal -->
                                                    <div class="modal" id="myModal">
                                                        <div class="modal-dialog">
                                                            <div class="modal-content" style="width:1000px;position: relative;top: 60px;left:-200px; padding: 20px 20px 50px 50px;">
                                                                <h4>Request ID: @item._requests.RequestId</h4>
                                                                <form method="POST" action="" style="max-width: 500px;padding-top:30px">
                                                                    <div class="form-group">
                                                                        <label for="subject" class="control-label" style="margin-left: 50px;">Subject: </label>
                                                                        <div class="input-group" style="max-width: 400px;margin-left: 140px;">
                                                                            @item._requests.Subject
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="description" class="control-label" style="margin-left: 50px;">Decription: </label>
                                                                        <div class="input-group" style="max-width: 400px;margin-left: 140px;">
                                                                            @item._requests.Description
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="requestorId" class="control-label" style="margin-left: 50px;">Requestor ID: </label>
                                                                        <div class="input-group" style="max-width: 400px;margin-left: 140px;">
                                                                            @item._requests.requestorId
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="requestorName" class="control-label" style="margin-left: 50px;">Requestor: </label>
                                                                        <div class="input-group" style="max-width: 400px;margin-left: 140px;">
                                                                            @item._accounts.Email
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="facilityId" class="control-label" style="margin-left: 50px;">Facility ID: </label>
                                                                        <div class="input-group" style="max-width: 400px;margin-left: 140px;">
                                                                            @item._requests.FacilityId
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="facility" class="control-label" style="margin-left: 50px;">Facility: </label>
                                                                        <div class="input-group" style="max-width: 400px;margin-left: 140px;">
                                                                            @item._facilities.FacilityName
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="createtime" class="control-label" style="margin-left: 50px;">Create Time: </label>
                                                                        <div class="input-group" style="max-width: 400px;margin-left: 140px;">
                                                                            @item._requests.CreateTime
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="assignee" class="control-label" style="margin-left: 50px;">Assignee: </label>
                                                                        <div class="input-group" style="max-width: 400px;margin-left: 140px;">
                                                                            @item._requests.Assignee
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group">
                                                                        <label for="endtime" class="control-label" style="margin-left: 50px;">End Time: </label>
                                                                        <div class="input-group" style="max-width: 400px;margin-left: 140px;">
                                                                            @item._requests.EndTime
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group" style="position:relative; top: -645px;left:500px;font-size:16px;">
                                                                        <label for="endtime" class="control-label">Current Status: </label>
                                                                        <div class="input-group" style="position:relative;top:-32px;left:130px">
                                                                            @item._requests.Status
                                                                        </div>
                                                                    </div>

                                                                    <div class="form-group" style="position:relative; top: -645px;left:500px;font-size:16px;">
                                                                        <label for="Status" class="control-label" >Change Status: </label>
                                                                        <select name="Status" id="Status" style="padding:5px 5px 5px 5px">
                                                                            <option value="Pending">Pending</option>
                                                                            <option value="Accepted">Accepted</option>
                                                                            <option value="Rejected">Rejected</option>
                                                                            <option value="Work-in-progress">Work-in-progress</option>
                                                                            <option value="Need-more-info">Need-more-info</option>
                                                                        </select>
                                                                    </div>

                                                                    <div class="form-group" style="position: relative; top: -645px; left: 500px; font-size: 16px;">
                                                                        <label for="Remark" class="control-label">Remark: </label>
                                                                        <div class="input-group" style="margin-top: 20px;">
                                                                            <textarea class="form-control" style="max-width:300px;" name="Remark" id="Remark" placeholder="@item._requests.Remark"></textarea>
                                                                        </div>
                                                                    </div>

                                                                    <div class="input-group" style="position:relative; top:-152px;left:330px">
                                                                        <div class="submitbutton">
                                                                            <a type="button" href="" class="btn btn-primary btn-block cancel-btn">Cancel</a>
                                                                        </div>
                                                                    </div>
                                                                    <div class="input-group" style="position:relative; top:-190px;left:410px">
                                                                        <div class="submitbutton">
                                                                            <button type="submit" class="btn btn-primary btn-block submit-btn" onclick="return confirm('Confirm to save the changes !!!')">Save changes</button>
                                                                        </div>
                                                                    </div>
</form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
